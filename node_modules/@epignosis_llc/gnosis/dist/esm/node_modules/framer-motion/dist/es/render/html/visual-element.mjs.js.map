{"version":3,"file":"visual-element.mjs.js","sources":["../../../../../../../../node_modules/framer-motion/dist/es/render/html/visual-element.mjs"],"sourcesContent":["import { __rest, __assign } from 'tslib';\nimport { visualElement } from '../index.mjs';\nimport { getOrigin, checkTargetForNewValues } from '../utils/setters.mjs';\nimport { buildHTMLStyles } from './utils/build-styles.mjs';\nimport { isCSSVariable } from '../dom/utils/is-css-variable.mjs';\nimport { parseDomVariant } from '../dom/utils/parse-dom-variant.mjs';\nimport { isTransformProp } from './utils/transform.mjs';\nimport { scrapeMotionValuesFromProps } from './utils/scrape-motion-values.mjs';\nimport { renderHTML } from './utils/render.mjs';\nimport { getDefaultValueType } from '../dom/value-types/defaults.mjs';\nimport { measureViewportBox } from '../../projection/utils/measure.mjs';\n\nfunction getComputedStyle(element) {\n    return window.getComputedStyle(element);\n}\nvar htmlConfig = {\n    treeType: \"dom\",\n    readValueFromInstance: function (domElement, key) {\n        if (isTransformProp(key)) {\n            var defaultType = getDefaultValueType(key);\n            return defaultType ? defaultType.default || 0 : 0;\n        }\n        else {\n            var computedStyle = getComputedStyle(domElement);\n            return ((isCSSVariable(key)\n                ? computedStyle.getPropertyValue(key)\n                : computedStyle[key]) || 0);\n        }\n    },\n    sortNodePosition: function (a, b) {\n        /**\n         * compareDocumentPosition returns a bitmask, by using the bitwise &\n         * we're returning true if 2 in that bitmask is set to true. 2 is set\n         * to true if b preceeds a.\n         */\n        return a.compareDocumentPosition(b) & 2 ? 1 : -1;\n    },\n    getBaseTarget: function (props, key) {\n        var _a;\n        return (_a = props.style) === null || _a === void 0 ? void 0 : _a[key];\n    },\n    measureViewportBox: function (element, _a) {\n        var transformPagePoint = _a.transformPagePoint;\n        return measureViewportBox(element, transformPagePoint);\n    },\n    /**\n     * Reset the transform on the current Element. This is called as part\n     * of a batched process across the entire layout tree. To remove this write\n     * cycle it'd be interesting to see if it's possible to \"undo\" all the current\n     * layout transforms up the tree in the same way this.getBoundingBoxWithoutTransforms\n     * works\n     */\n    resetTransform: function (element, domElement, props) {\n        var transformTemplate = props.transformTemplate;\n        domElement.style.transform = transformTemplate\n            ? transformTemplate({}, \"\")\n            : \"none\";\n        // Ensure that whatever happens next, we restore our transform on the next frame\n        element.scheduleRender();\n    },\n    restoreTransform: function (instance, mutableState) {\n        instance.style.transform = mutableState.style.transform;\n    },\n    removeValueFromRenderState: function (key, _a) {\n        var vars = _a.vars, style = _a.style;\n        delete vars[key];\n        delete style[key];\n    },\n    /**\n     * Ensure that HTML and Framer-specific value types like `px`->`%` and `Color`\n     * can be animated by Motion.\n     */\n    makeTargetAnimatable: function (element, _a, _b, isMounted) {\n        var transformValues = _b.transformValues;\n        if (isMounted === void 0) { isMounted = true; }\n        var transition = _a.transition, transitionEnd = _a.transitionEnd, target = __rest(_a, [\"transition\", \"transitionEnd\"]);\n        var origin = getOrigin(target, transition || {}, element);\n        /**\n         * If Framer has provided a function to convert `Color` etc value types, convert them\n         */\n        if (transformValues) {\n            if (transitionEnd)\n                transitionEnd = transformValues(transitionEnd);\n            if (target)\n                target = transformValues(target);\n            if (origin)\n                origin = transformValues(origin);\n        }\n        if (isMounted) {\n            checkTargetForNewValues(element, target, origin);\n            var parsed = parseDomVariant(element, target, origin, transitionEnd);\n            transitionEnd = parsed.transitionEnd;\n            target = parsed.target;\n        }\n        return __assign({ transition: transition, transitionEnd: transitionEnd }, target);\n    },\n    scrapeMotionValuesFromProps: scrapeMotionValuesFromProps,\n    build: function (element, renderState, latestValues, options, props) {\n        if (element.isVisible !== undefined) {\n            renderState.style.visibility = element.isVisible\n                ? \"visible\"\n                : \"hidden\";\n        }\n        buildHTMLStyles(renderState, latestValues, options, props.transformTemplate);\n    },\n    render: renderHTML,\n};\nvar htmlVisualElement = visualElement(htmlConfig);\n\nexport { getComputedStyle, htmlConfig, htmlVisualElement };\n"],"names":[],"mappings":"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"}