{"version":3,"file":"use-viewport.mjs.js","sources":["../../../../../../../../../node_modules/framer-motion/dist/es/motion/features/viewport/use-viewport.mjs"],"sourcesContent":["import { useRef, useEffect } from 'react';\nimport { AnimationType } from '../../../render/utils/types.mjs';\nimport { warnOnce } from '../../../utils/warn-once.mjs';\nimport { observeIntersection } from './observers.mjs';\n\nfunction useViewport(_a) {\n    var visualElement = _a.visualElement, whileInView = _a.whileInView, onViewportEnter = _a.onViewportEnter, onViewportLeave = _a.onViewportLeave, _b = _a.viewport, viewport = _b === void 0 ? {} : _b;\n    var state = useRef({\n        hasEnteredView: false,\n        isInView: false,\n    });\n    var shouldObserve = Boolean(whileInView || onViewportEnter || onViewportLeave);\n    if (viewport.once && state.current.hasEnteredView)\n        shouldObserve = false;\n    var useObserver = typeof IntersectionObserver === \"undefined\"\n        ? useMissingIntersectionObserver\n        : useIntersectionObserver;\n    useObserver(shouldObserve, state.current, visualElement, viewport);\n}\nvar thresholdNames = {\n    some: 0,\n    all: 1,\n};\nfunction useIntersectionObserver(shouldObserve, state, visualElement, _a) {\n    var root = _a.root, rootMargin = _a.margin, _b = _a.amount, amount = _b === void 0 ? \"some\" : _b, once = _a.once;\n    useEffect(function () {\n        if (!shouldObserve)\n            return;\n        var options = {\n            root: root === null || root === void 0 ? void 0 : root.current,\n            rootMargin: rootMargin,\n            threshold: typeof amount === \"number\" ? amount : thresholdNames[amount],\n        };\n        var intersectionCallback = function (entry) {\n            var _a;\n            var isIntersecting = entry.isIntersecting;\n            /**\n             * If there's been no change in the viewport state, early return.\n             */\n            if (state.isInView === isIntersecting)\n                return;\n            state.isInView = isIntersecting;\n            /**\n             * Handle hasEnteredView. If this is only meant to run once, and\n             * element isn't visible, early return. Otherwise set hasEnteredView to true.\n             */\n            if (once && !isIntersecting && state.hasEnteredView) {\n                return;\n            }\n            else if (isIntersecting) {\n                state.hasEnteredView = true;\n            }\n            (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(AnimationType.InView, isIntersecting);\n            /**\n             * Use the latest committed props rather than the ones in scope\n             * when this observer is created\n             */\n            var props = visualElement.getProps();\n            var callback = isIntersecting\n                ? props.onViewportEnter\n                : props.onViewportLeave;\n            callback === null || callback === void 0 ? void 0 : callback(entry);\n        };\n        return observeIntersection(visualElement.getInstance(), options, intersectionCallback);\n    }, [shouldObserve, root, rootMargin, amount]);\n}\n/**\n * If IntersectionObserver is missing, we activate inView and fire onViewportEnter\n * on mount. This way, the page will be in the state the author expects users\n * to see it in for everyone.\n */\nfunction useMissingIntersectionObserver(shouldObserve, state, visualElement, _a) {\n    var _b = _a.fallback, fallback = _b === void 0 ? true : _b;\n    useEffect(function () {\n        if (!shouldObserve || !fallback)\n            return;\n        if (process.env.NODE_ENV !== \"production\") {\n            warnOnce(false, \"IntersectionObserver not available on this device. whileInView animations will trigger on mount.\");\n        }\n        /**\n         * Fire this in an rAF because, at this point, the animation state\n         * won't have flushed for the first time and there's certain logic in\n         * there that behaves differently on the initial animation.\n         *\n         * This hook should be quite rarely called so setting this in an rAF\n         * is preferred to changing the behaviour of the animation state.\n         */\n        requestAnimationFrame(function () {\n            var _a;\n            state.hasEnteredView = true;\n            var onViewportEnter = visualElement.getProps().onViewportEnter;\n            onViewportEnter === null || onViewportEnter === void 0 ? void 0 : onViewportEnter(null);\n            (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(AnimationType.InView, true);\n        });\n    }, [shouldObserve]);\n}\n\nexport { useViewport };\n"],"names":[],"mappings":"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"}