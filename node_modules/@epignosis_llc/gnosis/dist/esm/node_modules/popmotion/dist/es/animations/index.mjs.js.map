{"version":3,"file":"index.mjs.js","sources":["../../../../../../../node_modules/popmotion/dist/es/animations/index.mjs"],"sourcesContent":["import { __rest } from 'tslib';\nimport { detectAnimationFromOptions } from './utils/detect-animation-from-options.mjs';\nimport sync, { cancelSync } from 'framesync';\nimport { interpolate } from '../utils/interpolate.mjs';\nimport { hasRepeatDelayElapsed, reverseElapsed, loopElapsed } from './utils/elapsed.mjs';\n\nconst framesync = (update) => {\n    const passTimestamp = ({ delta }) => update(delta);\n    return {\n        start: () => sync.update(passTimestamp, true),\n        stop: () => cancelSync.update(passTimestamp),\n    };\n};\nfunction animate(_a) {\n    var _b, _c;\n    var { from, autoplay = true, driver = framesync, elapsed = 0, repeat: repeatMax = 0, repeatType = \"loop\", repeatDelay = 0, onPlay, onStop, onComplete, onRepeat, onUpdate } = _a, options = __rest(_a, [\"from\", \"autoplay\", \"driver\", \"elapsed\", \"repeat\", \"repeatType\", \"repeatDelay\", \"onPlay\", \"onStop\", \"onComplete\", \"onRepeat\", \"onUpdate\"]);\n    let { to } = options;\n    let driverControls;\n    let repeatCount = 0;\n    let computedDuration = options.duration;\n    let latest;\n    let isComplete = false;\n    let isForwardPlayback = true;\n    let interpolateFromNumber;\n    const animator = detectAnimationFromOptions(options);\n    if ((_c = (_b = animator).needsInterpolation) === null || _c === void 0 ? void 0 : _c.call(_b, from, to)) {\n        interpolateFromNumber = interpolate([0, 100], [from, to], {\n            clamp: false,\n        });\n        from = 0;\n        to = 100;\n    }\n    const animation = animator(Object.assign(Object.assign({}, options), { from, to }));\n    function repeat() {\n        repeatCount++;\n        if (repeatType === \"reverse\") {\n            isForwardPlayback = repeatCount % 2 === 0;\n            elapsed = reverseElapsed(elapsed, computedDuration, repeatDelay, isForwardPlayback);\n        }\n        else {\n            elapsed = loopElapsed(elapsed, computedDuration, repeatDelay);\n            if (repeatType === \"mirror\")\n                animation.flipTarget();\n        }\n        isComplete = false;\n        onRepeat && onRepeat();\n    }\n    function complete() {\n        driverControls.stop();\n        onComplete && onComplete();\n    }\n    function update(delta) {\n        if (!isForwardPlayback)\n            delta = -delta;\n        elapsed += delta;\n        if (!isComplete) {\n            const state = animation.next(Math.max(0, elapsed));\n            latest = state.value;\n            if (interpolateFromNumber)\n                latest = interpolateFromNumber(latest);\n            isComplete = isForwardPlayback ? state.done : elapsed <= 0;\n        }\n        onUpdate === null || onUpdate === void 0 ? void 0 : onUpdate(latest);\n        if (isComplete) {\n            if (repeatCount === 0)\n                computedDuration !== null && computedDuration !== void 0 ? computedDuration : (computedDuration = elapsed);\n            if (repeatCount < repeatMax) {\n                hasRepeatDelayElapsed(elapsed, computedDuration, repeatDelay, isForwardPlayback) && repeat();\n            }\n            else {\n                complete();\n            }\n        }\n    }\n    function play() {\n        onPlay === null || onPlay === void 0 ? void 0 : onPlay();\n        driverControls = driver(update);\n        driverControls.start();\n    }\n    autoplay && play();\n    return {\n        stop: () => {\n            onStop === null || onStop === void 0 ? void 0 : onStop();\n            driverControls.stop();\n        },\n    };\n}\n\nexport { animate };\n"],"names":[],"mappings":"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"}